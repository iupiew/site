<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>$title$</title>
    <link rel="stylesheet" href="/css/default.css" />
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body data-theme="dark">
    <header>

        <nav>
            <a href="/">main</a>
            <a href="/about.html">about</a>
            <a href="/cv.html">cv</a>
            <a href="/archive.html">archive</a>
            <button id="theme-button"></button>
        </nav>
    </header>

    <main role="main">
        <p>$body$</p>
    </main>

    <!-- <footer> -->
    <!--         <strong style="font-size: 150%">Î»</strong>  -->
    <!--        Site proudly generated by -->
    <!--     <a href="http://jaspervdj.be/hakyll">Hakyll</a> -->
    <!-- </footer> -->

  <script>
        (() => {
            // Initialize theme management
            window.site = {
                prefTheme: getPrefTheme(),
                setTheme: (name) => {
                    document.body.setAttribute('data-theme', name);
                    localStorage.setItem('prefTheme', name);
                    updateButtonIcon(name);
                },
            };

            // Get preferred theme from localStorage or system preference
            function getPrefTheme() {
                const localPrefTheme = localStorage.getItem('prefTheme');
                return ['dark', 'light'].includes(localPrefTheme)
                    ? localPrefTheme
                    : matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
            }

            // Set initial theme
            window.site.setTheme(window.site.prefTheme);
        })();
    </script>

 <script>
        (() => {
            const button = document.getElementById('theme-button');

            // Function to update the button icon based on the current theme
            const updateButtonIcon = (theme) => {
                button.innerHTML = theme === 'dark'
                    ? '<img src="../assets/light_mode.svg" alt="Light Mode" width="24" height="24">'
                    : '<img src="../assets/dark_mode.svg" alt="Dark Mode" width="24" height="24">';
            };

            // Set the initial button icon
            updateButtonIcon(window.site.prefTheme);

            // Add click event to toggle theme
            button.addEventListener('click', () => {
                const currentTheme = window.site.prefTheme;
                const nextTheme = currentTheme === 'dark' ? 'light' : 'dark';
                window.site.prefTheme = nextTheme; // Update current theme in the site object
                updateButtonIcon(nextTheme); // Update the icon immediately
                window.site.setTheme(nextTheme); // Update the theme
            });
        })();
    </script>

   </body>
</html>

